<!doctype html>
<html lang="en" data-theme="dark">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Exam Writer</title>

    <link rel="manifest" href="manifest.webmanifest">
    <meta name="theme-color" content="#0f172a" />
    <link rel="icon" href="icons/icon-192.png" />
    <link rel="stylesheet" href="styles.css" />
    <script defer src="app.js"></script>
  </head>
  <body>
    <header class="appbar">
      <div class="brand" id="brandHotspot" title="Admin menu (hidden)">üìù Exam Writer</div>
      <nav class="toolbar" role="toolbar" aria-label="Document actions">
        <button id="newBtn" title="New (Ctrl+N)">New</button>
        <button id="openBtn" title="Open (Ctrl+Shift+O)">Open‚Ä¶</button>
        <button id="saveAsBtn" title="Save As (Ctrl+Shift+S)">Save As‚Ä¶</button>
        <button id="printBtn" title="Print (Ctrl+P)">Print</button>
        <button id="fullscreenBtn" title="Toggle Full Screen (F11)">Full Screen</button>
        <button id="themeBtn" title="Toggle theme">Theme</button>
        <button id="helpBtn" title="Help & shortcuts">Help</button>
        <span class="spacer" aria-hidden="true"></span>
        <div class="status">
          <span id="autosaveStatus" aria-live="polite">Autosave: off</span>
          <span class="dot" id="dirtyDot" title="Unsaved changes" hidden></span>
        </div>
      </nav>
    </header>

    <main>
      <div class="meta">
        <label>Center Number <input id="centerNumber" type="text" placeholder="e.g., 12345" /></label>
        <label>Candidate ID <input id="candidateId" type="text" placeholder="e.g., 123456" /></label>
        <label>Candidate Name <input id="candidateName" type="text" placeholder="e.g., Jane Doe" /></label>
        <label>Exam Title <input id="examTitle" type="text" placeholder="e.g., English Paper 2" /></label>
        <div class="meta-right"><span id="wordCount">0 words</span></div>
      </div>

      <section class="editor-shell">
        <textarea id="editor" placeholder="Save your exam file to begin‚Ä¶"
          aria-label="Exam text editor" disabled spellcheck="false"
          autocapitalize="off" autocorrect="off" autocomplete="off"></textarea>

        <!-- PRINT-ONLY: manual paginator renders pages here -->
        <div id="printStack" aria-hidden="true"></div>
      </section>
    </main>

    <!-- First-save modal -->
    <dialog id="firstSaveDialog" class="modal" aria-labelledby="firstSaveTitle">
      <h2 id="firstSaveTitle">Save your exam file to begin</h2>
      <p>Choose where to save your exam file. Autosave runs every minute.</p>
      <form method="dialog"><menu><button id="firstSaveCancel">Cancel</button></menu></form>
      <menu><button id="firstSaveConfirm" class="primary">Choose location‚Ä¶</button></menu>
    </dialog>

    <!-- Admin modal -->
    <dialog id="adminDialog" class="modal" aria-labelledby="adminTitle">
      <h2 id="adminTitle">Administrator</h2>
      <p>Enter admin PIN to access controls.</p>
      <label>PIN <input id="adminPin" type="password" inputmode="numeric" pattern="[0-9]*" /></label>
      <menu><button id="adminCancel">Cancel</button><button id="adminUnlock" class="primary">Unlock</button></menu>
      <div id="adminPanel" hidden>
        <menu>
          <button id="forceSaveBtn">Force save now</button>
          <button id="exitAppBtn">Exit app / end session</button>
        </menu>
        <small>Shortcut: Ctrl + Shift + E / Ctrl + Alt + K or tap logo 5√ó</small>
      </div>
    </dialog>

    <!-- Help modal -->
    <dialog id="helpDialog" class="modal" aria-labelledby="helpTitle">
      <h2 id="helpTitle">Help & Shortcuts</h2>
      <div class="help-content">
        <ul class="shortcut-list">
          <li><kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>O</kbd> ‚Äî Open saved file</li>
          <li><kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>S</kbd> ‚Äî Save file</li>
          <li><kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>+</kbd> ‚Äî Zoom In (increase font size)</li>
          <li><kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>-</kbd> ‚Äî Zoom Out (decrease font size)</li>
          <li><kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>0</kbd> ‚Äî Return to default size</li>
        </ul>
        <p class="help-note">
          You must save your file before you can start writing/editing the document.
          Please name this document with <em>your name</em> and the <em>exam name</em>,
          for example <strong>Joe Bloggs English Paper 2</strong>.
        </p>
        <p class="help-note">
          If you have any issues during the exam, please raise your hand and an Invigilator will be with you to assist further.
        </p>
      </div>
      <menu><button id="helpCloseBtn" class="primary">Close</button></menu>
    </dialog>

    <noscript><p style="padding:1rem;">This app requires JavaScript.</p></noscript>
  </body>
</html>
